# H2配置修复与字段扩容

## 1. 修改背景
- 用户反馈在使用包含多张截图的回答时遇到 `HTTP 413 Payload Too Large` 错误。
- 用户反馈 `mvn spring-boot:run` 启动报错，提示 H2 数据库配置冲突。
- 数据库字段长度不足以存储 Base64 编码的图片数据。

## 2. 修改内容

### 2.1 修复 H2 数据库配置冲突
- **文件**: [application.properties](src/main/resources/application.properties)
- **问题**: H2 数据库不支持同时开启 `AUTO_SERVER=TRUE` 和 `DB_CLOSE_ON_EXIT=FALSE`。
- **修改**: 移除了 `DB_CLOSE_ON_EXIT=FALSE` 配置，保留 `AUTO_SERVER=TRUE` 以支持并发访问。

### 2.2 增加文件上传限制
- **文件**: [application.properties](src/main/resources/application.properties)
- **修改**: 将文件上传和请求大小限制从默认值（1MB/10MB）提升至 100MB。
```properties
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB
server.tomcat.max-http-form-post-size=100MB
```

### 2.3 数据库字段类型扩容 (支持富文本/图片)
- **文件**: [Question.java](src/main/java/com/example/quiz/model/Question.java)
- **修改**: 将 `description` 字段的定义从 `length=2000` 修改为 `columnDefinition = "TEXT"`，以支持存储大量文本和图片数据。

- **文件**: [schema.sql](src/main/resources/schema.sql)
- **修改**: 同步更新文档，将 `questions` 表的 `description` 和 `answers` 表的 `content` 字段类型修改为 `TEXT`。

## 3. 验证结果
- 执行 `mvn clean package -DskipTests` 打包成功。
- 修复了启动时的数据库连接错误。
- 理论上解决了图片上传大小限制和数据库存储长度限制问题。
